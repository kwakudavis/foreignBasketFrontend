{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport isEqual from 'lodash.isequal';\nvar Form = /*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Form, _React$Component);\n  function Form() {\n    var _this;\n    _this = _React$Component.call(this) || this;\n    _this.handleSubmit = function (e) {\n      e && e.preventDefault();\n      _this.updateModel();\n      if (_this.formIsValid()) {\n        _this.setState({\n          serverErrors: null\n        }, function () {\n          _this.props.onSubmit && _this.props.onSubmit(_this.model);\n        });\n      } else {\n        _this.props.onValidationError && _this.props.onValidationError(_this.invalidComponents);\n      }\n    };\n    _this.registerComponent = function (component) {\n      _this.formComponents[component.props.name] = component;\n    };\n    _this.unregisterComponent = function (component) {\n      delete _this.formComponents[component.props.name];\n      delete _this.model[component.props.name];\n    };\n    _this.state = {\n      serverErrors: null\n    };\n    _this.model = {};\n    _this.formComponents = {};\n    _this.invalidComponents = [];\n    return _this;\n  }\n  var _proto = Form.prototype;\n  _proto.getChildContext = function getChildContext() {\n    return {\n      ICFormable: {\n        registerComponent: this.registerComponent,\n        unregisterComponent: this.unregisterComponent\n      }\n    };\n  };\n  _proto.componentDidMount = function componentDidMount() {\n    this.updateModel();\n  };\n  _proto.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var _this2 = this;\n    if (nextProps.serverErrors && !isEqual(this.state.serverErrors, nextProps.serverErrors)) {\n      this.setState({\n        serverErrors: nextProps.serverErrors\n      }, function () {\n        _this2.setErrorsOnFormComponents(_this2.state.serverErrors);\n      });\n    }\n  };\n  _proto.setErrorsOnFormComponents = function setErrorsOnFormComponents(serverErrors) {\n    var _this3 = this;\n    Object.keys(serverErrors).forEach(function (name) {\n      var component = _this3.formComponents[name];\n      component.setState({\n        isValid: false,\n        serverError: serverErrors[name]\n      });\n    });\n  };\n  _proto.formIsValid = function formIsValid() {\n    var components = Object.values(this.formComponents);\n    this.invalidComponents = components.filter(function (component) {\n      return !component.validate();\n    });\n    return this.invalidComponents.length === 0;\n  };\n  _proto.updateModel = function updateModel() {\n    var _this4 = this;\n    Object.keys(this.formComponents).forEach(function (name) {\n      var component = _this4.formComponents[name];\n      if (component.props.disabled) {\n        delete _this4.model[name];\n      } else {\n        _this4.model[name] = component.getValue();\n      }\n    });\n  };\n  _proto.render = function render() {\n    var _this$props = this.props,\n      children = _this$props.children,\n      formProps = _this$props.formProps;\n    return React.createElement(\"form\", _extends({}, formProps, {\n      onSubmit: this.handleSubmit\n    }), children);\n  };\n  return Form;\n}(React.Component);\nForm.propTypes = {\n  /** Form html chilren */\n  children: PropTypes.node,\n  /** HTML form attributes */\n  formProps: PropTypes.shape({}),\n  /** onSubmit callback will pass in model as parameter */\n  onSubmit: PropTypes.func,\n  /** onValidationError callback will pass in invalid FormComponents as parameter */\n  onValidationError: PropTypes.func,\n  /** errors from server mapped to model names. Will attach serverErrors styling to FormComppnents */\n  serverErrors: PropTypes.shape({})\n};\nForm.childContextTypes = {\n  ICFormable: PropTypes.object\n};\nexport default Form;","map":{"version":3,"names":["_extends","_inheritsLoose","React","PropTypes","isEqual","Form","_React$Component","_this","call","handleSubmit","e","preventDefault","updateModel","formIsValid","setState","serverErrors","props","onSubmit","model","onValidationError","invalidComponents","registerComponent","component","formComponents","name","unregisterComponent","state","_proto","prototype","getChildContext","ICFormable","componentDidMount","componentWillReceiveProps","nextProps","_this2","setErrorsOnFormComponents","_this3","Object","keys","forEach","isValid","serverError","components","values","filter","validate","length","_this4","disabled","getValue","render","_this$props","children","formProps","createElement","Component","propTypes","node","shape","func","childContextTypes","object"],"sources":["/Users/davis/Desktop/Nonsao/Front/node_modules/ic-snacks/dist/esm/components/Forms/Form.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport isEqual from 'lodash.isequal';\n\nvar Form =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Form, _React$Component);\n\n  function Form() {\n    var _this;\n\n    _this = _React$Component.call(this) || this;\n\n    _this.handleSubmit = function (e) {\n      e && e.preventDefault();\n\n      _this.updateModel();\n\n      if (_this.formIsValid()) {\n        _this.setState({\n          serverErrors: null\n        }, function () {\n          _this.props.onSubmit && _this.props.onSubmit(_this.model);\n        });\n      } else {\n        _this.props.onValidationError && _this.props.onValidationError(_this.invalidComponents);\n      }\n    };\n\n    _this.registerComponent = function (component) {\n      _this.formComponents[component.props.name] = component;\n    };\n\n    _this.unregisterComponent = function (component) {\n      delete _this.formComponents[component.props.name];\n      delete _this.model[component.props.name];\n    };\n\n    _this.state = {\n      serverErrors: null\n    };\n    _this.model = {};\n    _this.formComponents = {};\n    _this.invalidComponents = [];\n    return _this;\n  }\n\n  var _proto = Form.prototype;\n\n  _proto.getChildContext = function getChildContext() {\n    return {\n      ICFormable: {\n        registerComponent: this.registerComponent,\n        unregisterComponent: this.unregisterComponent\n      }\n    };\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.updateModel();\n  };\n\n  _proto.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var _this2 = this;\n\n    if (nextProps.serverErrors && !isEqual(this.state.serverErrors, nextProps.serverErrors)) {\n      this.setState({\n        serverErrors: nextProps.serverErrors\n      }, function () {\n        _this2.setErrorsOnFormComponents(_this2.state.serverErrors);\n      });\n    }\n  };\n\n  _proto.setErrorsOnFormComponents = function setErrorsOnFormComponents(serverErrors) {\n    var _this3 = this;\n\n    Object.keys(serverErrors).forEach(function (name) {\n      var component = _this3.formComponents[name];\n      component.setState({\n        isValid: false,\n        serverError: serverErrors[name]\n      });\n    });\n  };\n\n  _proto.formIsValid = function formIsValid() {\n    var components = Object.values(this.formComponents);\n    this.invalidComponents = components.filter(function (component) {\n      return !component.validate();\n    });\n    return this.invalidComponents.length === 0;\n  };\n\n  _proto.updateModel = function updateModel() {\n    var _this4 = this;\n\n    Object.keys(this.formComponents).forEach(function (name) {\n      var component = _this4.formComponents[name];\n\n      if (component.props.disabled) {\n        delete _this4.model[name];\n      } else {\n        _this4.model[name] = component.getValue();\n      }\n    });\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        children = _this$props.children,\n        formProps = _this$props.formProps;\n    return React.createElement(\"form\", _extends({}, formProps, {\n      onSubmit: this.handleSubmit\n    }), children);\n  };\n\n  return Form;\n}(React.Component);\n\nForm.propTypes = {\n  /** Form html chilren */\n  children: PropTypes.node,\n\n  /** HTML form attributes */\n  formProps: PropTypes.shape({}),\n\n  /** onSubmit callback will pass in model as parameter */\n  onSubmit: PropTypes.func,\n\n  /** onValidationError callback will pass in invalid FormComponents as parameter */\n  onValidationError: PropTypes.func,\n\n  /** errors from server mapped to model names. Will attach serverErrors styling to FormComppnents */\n  serverErrors: PropTypes.shape({})\n};\nForm.childContextTypes = {\n  ICFormable: PropTypes.object\n};\nexport default Form;"],"mappings":"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"},"metadata":{},"sourceType":"module"}