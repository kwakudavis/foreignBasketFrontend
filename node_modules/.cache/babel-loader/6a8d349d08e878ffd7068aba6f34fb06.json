{"ast":null,"code":"import _regeneratorRuntime from\"/Users/davis/Desktop/Nonsao/Front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/davis/Desktop/Nonsao/Front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/davis/Desktop/Nonsao/Front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/davis/Desktop/Nonsao/Front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/davis/Desktop/Nonsao/Front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/davis/Desktop/Nonsao/Front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import _ from\"lodash\";import Shoppageheader from\"./components/Shoppageheader\";import DisplayProductResults from\"./components/DisplayProductResults\";import\"./index.css\";import{fetchStoresInventory,setCartModalState}from\"./actions\";import{connect}from\"react-redux\";import{CartModal}from\"./Cartmodal\";import{showModal}from\"./components/isModalActive\";import{DisplayCartItems}from\"./components/DisplayCartItems\";import DisplayCartItemsOnCheckout from\"./components/DisplayCartItemsOnCheckout\";import{Button}from\"ic-snacks\";import{GoogleAuthProvider,onAuthStateChanged}from\"firebase/auth\";import GoogleButton from\"react-google-button\";import{db,auth}from\"./firebase/firebaseConfig\";import{signIn,signOut}from\"./actions\";import*as firebaseAuthSource from\"firebase/auth\";import CheckOutForm from\"./components/CheckOutForm\";/////// Set up providers to be used\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var googleprovider=new GoogleAuthProvider();////// Set scopes for google auth provider\ngoogleprovider.addScope(\"profile\");googleprovider.addScope(\"email\");var CheckOutPage=/*#__PURE__*/function(_React$Component){_inherits(CheckOutPage,_React$Component);var _super=_createSuper(CheckOutPage);function CheckOutPage(props){var _this;_classCallCheck(this,CheckOutPage);_this=_super.call(this,props);_this.triggeredOnChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user){var addressV,mobileV,details;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:// this.renderOutputAccountPageBasedOnState();\n///////Update is Logged in global redux State with true if user is logged in\nif(user!==null){/////\n_this.props.signIn(user);/////// Fetch user's stored details and stoer in globalstate\n///user.address = addressV;\n// user.mobile = mobileV;\n_this.setState({user:user});}//////Update is Logged in State with false if user is not logged in\nelse{_this.props.signOut();_this.setState({user:null});// console.log(this.props.loginState);\n}case 1:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={};return _this;}_createClass(CheckOutPage,[{key:\"renderLoggedInUserDetails\",value:function renderLoggedInUserDetails(user){/////// If user is logged in get user details and display logged in message\nif(user){//////Get and set users Address and Phone Number\nreturn/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"13px\",width:\"140px\",lineHeight:\"15px\"},children:\"By clicking Submit Order, you are continuing with your google account.\"});}else{////////Login Button\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[\"Login to get address:\",\" \",/*#__PURE__*/_jsx(GoogleButton,{style:{fontSize:\"7px\",width:\"140px\",height:\"50px\"},onClick:function onClick(){try{firebaseAuthSource.signInWithPopup(auth,googleprovider).then(function(result){// var user = result.user;\n});}catch(err){console.log(err);}}}),\" \"]});}}},{key:\"componentDidMount\",value:function componentDidMount(){//////Check if user is logged in or not, and update global login state appropriately\nonAuthStateChanged(auth,this.triggeredOnChange);}},{key:\"isCartEmpty\",value:function isCartEmpty(cart){if(cart===null||cart.length<1){return/*#__PURE__*/_jsx(\"div\",{children:\" There are no items in cart. \"});}}},{key:\"submitOrder\",value:function submitOrder(){/////Display Order Submitted\nconsole.log(\"Order submitted succesfully\");////Redirect to shop page\n}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[showModal(this.props.cartModalActive,this.props.setCartModalState,this.props.cart),/*#__PURE__*/_jsx(\"div\",{className:\"checkOutPageMainDiv\",children:/*#__PURE__*/_jsxs(\"div\",{style:{border:\"2px dotted black\",padding:\"4px\",marginLeft:\"10px\",marginRight:\"10px\"},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"header\",children:\"Cart\"}),/*#__PURE__*/_jsx(DisplayCartItemsOnCheckout,{cartItems:this.props.cart}),this.isCartEmpty(this.props.cart),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"40px\"},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Payment Method: \"}),\" Currently, we are only processing payments On delivery , we accept Cash, Visa and \",\"\",/*#__PURE__*/_jsx(\"i\",{className:\"cc visa icon\",style:{color:\"blue\"}}),\" \",\"Mastercard.\",\" \",/*#__PURE__*/_jsx(\"i\",{className:\"cc mastercard icon\",style:{color:\"red\"}})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"20px\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",marginTop:\"10px\"},children:[/*#__PURE__*/_jsx(\"div\",{children:this.renderLoggedInUserDetails(this.state.user)}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\"},children:[\" \",/*#__PURE__*/_jsx(CheckOutForm,{user:this.state.user})]})]})]})})]});}}]);return CheckOutPage;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{storesInvetory:state.storesInvetory,products:state.products,inventories:state.storesInvetory,stores:state.stores,cartModalActive:state.cartModalActive,cart:state.cart};};export default connect(mapStateToProps,{fetchStoresInventory:fetchStoresInventory,setCartModalState:setCartModalState,signIn:signIn,signOut:signOut})(CheckOutPage);","map":{"version":3,"names":["React","_","Shoppageheader","DisplayProductResults","fetchStoresInventory","setCartModalState","connect","CartModal","showModal","DisplayCartItems","DisplayCartItemsOnCheckout","Button","GoogleAuthProvider","onAuthStateChanged","GoogleButton","db","auth","signIn","signOut","firebaseAuthSource","CheckOutForm","googleprovider","addScope","CheckOutPage","props","triggeredOnChange","user","setState","state","fontSize","width","lineHeight","height","signInWithPopup","then","result","err","console","log","cart","length","cartModalActive","border","padding","marginLeft","marginRight","isCartEmpty","marginTop","color","display","flexDirection","justifyContent","renderLoggedInUserDetails","Component","mapStateToProps","storesInvetory","products","inventories","stores"],"sources":["/Users/davis/Desktop/Nonsao/Front/src/CheckOutPage.js"],"sourcesContent":["import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport Shoppageheader from \"./components/Shoppageheader\";\r\n\r\nimport DisplayProductResults from \"./components/DisplayProductResults\";\r\n\r\nimport \"./index.css\";\r\nimport { fetchStoresInventory, setCartModalState } from \"./actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { CartModal } from \"./Cartmodal\";\r\nimport { showModal } from \"./components/isModalActive\";\r\n\r\nimport { DisplayCartItems } from \"./components/DisplayCartItems\";\r\nimport DisplayCartItemsOnCheckout from \"./components/DisplayCartItemsOnCheckout\";\r\n\r\nimport { Button } from \"ic-snacks\";\r\n\r\nimport { GoogleAuthProvider, onAuthStateChanged } from \"firebase/auth\";\r\n\r\nimport GoogleButton from \"react-google-button\";\r\nimport { db, auth } from \"./firebase/firebaseConfig\";\r\n\r\nimport { signIn, signOut } from \"./actions\";\r\nimport * as firebaseAuthSource from \"firebase/auth\";\r\n\r\nimport CheckOutForm from \"./components/CheckOutForm\";\r\n\r\n/////// Set up providers to be used\r\nvar googleprovider = new GoogleAuthProvider();\r\n\r\n////// Set scopes for google auth provider\r\ngoogleprovider.addScope(\"profile\");\r\ngoogleprovider.addScope(\"email\");\r\n\r\nclass CheckOutPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  triggeredOnChange = async (user) => {\r\n    // this.renderOutputAccountPageBasedOnState();\r\n\r\n    ///////Update is Logged in global redux State with true if user is logged in\r\n    if (user !== null) {\r\n      /////\r\n      this.props.signIn(user);\r\n\r\n      /////// Fetch user's stored details and stoer in globalstate\r\n      var addressV;\r\n      var mobileV;\r\n      var details;\r\n\r\n      ///user.address = addressV;\r\n      // user.mobile = mobileV;\r\n      this.setState({ user: user });\r\n    }\r\n    //////Update is Logged in State with false if user is not logged in\r\n    else {\r\n      this.props.signOut();\r\n      this.setState({ user: null });\r\n      // console.log(this.props.loginState);\r\n    }\r\n  };\r\n\r\n  renderLoggedInUserDetails(user) {\r\n    /////// If user is logged in get user details and display logged in message\r\n    if (user) {\r\n      //////Get and set users Address and Phone Number\r\n\r\n      return (\r\n        <div style={{ fontSize: \"13px\", width: \"140px\", lineHeight: \"15px\" }}>\r\n          By clicking Submit Order, you are continuing with your google account.\r\n        </div>\r\n      );\r\n    } else {\r\n      ////////Login Button\r\n      return (\r\n        <div>\r\n          Login to get address:{\" \"}\r\n          <GoogleButton\r\n            style={{ fontSize: \"7px\", width: \"140px\", height: \"50px\" }}\r\n            onClick={() => {\r\n              try {\r\n                firebaseAuthSource\r\n                  .signInWithPopup(auth, googleprovider)\r\n                  .then(function (result) {\r\n                    // var user = result.user;\r\n                  });\r\n              } catch (err) {\r\n                console.log(err);\r\n              }\r\n            }}\r\n          />{\" \"}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    //////Check if user is logged in or not, and update global login state appropriately\r\n    onAuthStateChanged(auth, this.triggeredOnChange);\r\n  }\r\n\r\n  isCartEmpty(cart) {\r\n    if (cart === null || cart.length < 1) {\r\n      return <div> There are no items in cart. </div>;\r\n    }\r\n  }\r\n\r\n  submitOrder() {\r\n    /////Display Order Submitted\r\n    console.log(\"Order submitted succesfully\");\r\n\r\n    ////Redirect to shop page\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {showModal(\r\n          this.props.cartModalActive,\r\n          this.props.setCartModalState,\r\n          this.props.cart\r\n        )}\r\n        <div className=\"checkOutPageMainDiv\">\r\n          <div\r\n            style={{\r\n              border: \"2px dotted black\",\r\n              padding: \"4px\",\r\n              marginLeft: \"10px\",\r\n              marginRight: \"10px\"\r\n            }}\r\n          >\r\n            <h1 className=\"header\">Cart</h1>\r\n            <DisplayCartItemsOnCheckout cartItems={this.props.cart} />\r\n\r\n            {this.isCartEmpty(this.props.cart)}\r\n            <div style={{ marginTop: \"40px\" }}>\r\n              <h4>Payment Method: </h4> Currently, we are only processing\r\n              payments On delivery , we accept Cash, Visa and {\"\"}\r\n              <i className=\"cc visa icon\" style={{ color: \"blue\" }}></i>{\" \"}\r\n              Mastercard.{\" \"}\r\n              <i className=\"cc mastercard icon\" style={{ color: \"red\" }}></i>\r\n            </div>\r\n            <div style={{ marginTop: \"20px\" }}></div>\r\n\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                justifyContent: \"space-between\",\r\n                marginTop: \"10px\"\r\n              }}\r\n            >\r\n              <div>{this.renderLoggedInUserDetails(this.state.user)}</div>\r\n\r\n              <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n                {\" \"}\r\n                <CheckOutForm user={this.state.user} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    storesInvetory: state.storesInvetory,\r\n    products: state.products,\r\n    inventories: state.storesInvetory,\r\n    stores: state.stores,\r\n    cartModalActive: state.cartModalActive,\r\n    cart: state.cart\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  fetchStoresInventory,\r\n  setCartModalState,\r\n  signIn,\r\n  signOut\r\n})(CheckOutPage);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}